<template name="Organiser_registrations">
  <h1>RSVPs</h1>
  <hr>
  {{#card}}
    <table class="table table-hover table-responsive">
      <thead>
        <tr>
          <th scope="col">Attendee</th>
          <th scope="col">Event</th>
          <th scope="col">Deposit</th>
          <th scope="col">Status</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each registration in registrations}}
          <tr scope="row">
            <td class="align-middle">{{registration.attendee.name}}</td>
            <td class="align-middle">{{registration.event.name}}</td>
            <td class="align-middle">{{registration.formatDeposit}}</td>
            <td class="align-middle">
              {{#if registration.isRefunded}}
                Refunded
              {{else if registration.isCompleted}}
                Completed
              {{else if registration.isDeposited}}
                Deposited
              {{else}}
                Pending
              {{/if}}
            </td>
            <td class="align-middle">
              <div class="btn-group" role="group">
                {{#if registration.event.isStarted}}
                  {{#unless registration.isCompleted}}
                    {{#if registration.isDeposited}}
                      <button type="button" class="btn btn-outline-success" data-action="confirm"
                        data-id="{{registration._id}}">Confirm</button>
                    {{/if}}
                  {{/unless}}
                {{/if}}
              </div>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{/card}}
</template>